<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="QnA"> 
 	
	<resultMap type="qvo" id="qMap">
	 	<result property="qnaNo" column="qna_no"/>
	 	<result property="id" column="id"/>
	 	<result property="name" column="member_name"/>
 		<result property="groupNo" column="group_no"/>
 		<result property="title" column="title"/>
 		<result property="content" column="content"/>
 		<result property="date" column="qna_date"/>
 		<result property="hit" column="hit"/>
 		<result property="point" column="point"/>
 		<result property="answerStatus" column="answer_status"/>
 		<result property="ref" column="ref"/>
 		<result property="restep" column="restep"/>
 		<result property="relevel" column="relevel"/>
 	</resultMap>
 	
 	<resultMap type="qGroupvo" id="qGroupMap">
 		<result property="qnAGroupNo" column="group_no"/>
 		<result property="qnAGroupName" column="group_name"/>
 	</resultMap>
 	 
 <!-- 	 <select id="getAllList" resultMap="qMap">
 	 	select qna_no,id,group_no,title,content,to_char(qna_date,'YYYY.MM.DD') as qna_date,hit,point,answer_status,ref,restep,relevel from qna
 	 </select> -->
 	 
 	 <select id="getAllCount" resultType="int">
 	 	select count(*) from qna
 	 </select>
 	 
 	<select id="getAllList" parameterType="int" resultMap="qMap">
 	select qna_no,id,group_no,title,content,qna_date,hit,point,answer_status,ref,restep,relevel 
 	from(	select qna_no,id,group_no,title,content,qna_date,hit,point,answer_status,ref,restep,relevel,ceil(rownum/5) as page 
 			from(select qna_no,id,group_no,title,content,to_char(qna_date,'YYYY.MM.DD') as qna_date,hit,point,answer_status,ref,restep,relevel 
 				   from qna 
 				   order by qna_no desc
				   )
		  )
	where page=#{value}
 	 </select>
 	 
 	 <select id="showContent" parameterType="string" resultMap="qMap">
 	 	select qna_no,id,group_no,title,content,to_char(qna_date,'YYYY.MM.DD HH24:MI') as qna_date,hit,point,answer_status,ref,restep,relevel
 	 	from qna
 	 	where qna_no=#{value}
 	 </select>
 	 
 	 <update id="hitUpContent" parameterType="string">
 	 	update qna set hit=hit+1 where qna_no=#{value}
 	 </update>
 	 
 	 <select id="getGroupList" resultMap="qGroupMap">
 	 	select group_no,group_name from qna_group
 	 </select>
 </mapper> 		

 
 
 
 
 
 
 
















