<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="errorReport"> 
 
<select id="getReportErrorCode" resultType="evo">
 select distinct e.error_code as errorCode , er.error_no as errorNo,  er.discussion_status as discussionstatus  from ERROR_REPORT er, ERROR e where e.error_no = er.error_no and e.error_code is not null  
</select>

<select id="getReportExceptionMessage" resultType="evo">
select distinct e.exception_message as exceptionMessage, er.error_no as errorNo,  er.discussion_status as discussionstatus  from ERROR_REPORT er, ERROR e where e.error_no = er.error_no and e.exception_message is not null
</select>

<select id="getContentException" parameterType="String" resultType="evo">
select e.exception_message as exceptionMessage, to_char(error_report_date,'YYYY/MM/DD HH24:MI') as reportDate , er.content as content, er.discussion_status as discussionstatus from ERROR_REPORT er, ERROR e where e.error_no = er.error_no and e.error_no =#{value}
</select>
<select id="getContentErrorCode" parameterType="String" resultType="evo">
select e.error_code as errorCode, to_char(error_report_date,'YYYY/MM/DD HH24:MI') as reportDate , er.content as content, er.discussion_status as discussionstatus from ERROR_REPORT er, ERROR e where e.error_no = er.error_no and e.error_no =#{value}
</select>
<select id="getContentRegisterResult" parameterType="int" resultType="evo">
select e.error_code as errorCode ,  e.exception_message as exceptionMessage,to_char(error_report_date,'yyyy/mm/dd HH24:MI:SS') as reportdate, er.id, er.discussion_status as discussionstatus from ERROR_REPORT er, ERROR e where e.error_no = er.error_no and e.error_no = #{value}

</select>
<select id="currentValue" resultType="int">
select error_no.currval from dual
</select>
<insert id="writeReportExceptionTitle" parameterType="String">
insert into error(error_no,error_code) values(error_no.nextval,#{value})
</insert>
<insert id="writeReportException" parameterType="evo">
insert into error_report(error_report_no,error_no,id,error_report_date,content)
values(error_report_no.nextval,error_no.currval,#{id},sysdate,#{content})
</insert>
<insert id="writeReportErrorcodeTitle" parameterType="String">
insert into error(error_no,exception_message) values(error_no.nextval,#{value})
</insert>
<insert id="writeReportErrorcode">
insert into error_report(error_report_no,error_no,id,error_report_date,content)
values(error_report_no.nextval,error_no.currval,#{id},sysdate,#{content})
</insert>
 </mapper> 		
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
















